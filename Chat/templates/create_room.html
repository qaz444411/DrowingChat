<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>방 만들기</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/create_room.css') }}">
</head>
<body>
  <h2>채널 {{ channel_id }} - 새 방 만들기</h2>
  <form method="post">
    <label>방 제목</label>
    <input type="text" name="title" required>

    <label>최대 인원</label>
    <input type="number" name="max_users" value="16" min="1" max="100">

    <label>
      <input type="checkbox" name="is_private">
      비공개 방
    </label>
    
   <label>방 종류</label>
<select name="is_game_room">
  <option value="0">일반 채팅방</option>
  <option value="1">캐치마인드 게임</option>
</select>

    <br>
    <button type="submit">방 만들기</button>
    <a href="/channel/{{ channel_id }}">← 돌아가기</a>
  </form>

  <script>
document.addEventListener("DOMContentLoaded", function () {
  const typeSelect = document.querySelector("select[name='is_game_room']");
  const maxInput = document.querySelector("input[name='max_users']");

  typeSelect.addEventListener("change", function () {
    if (typeSelect.value === "1") {
      maxInput.value = 4;
      maxInput.readOnly = true;
    } else {
      maxInput.value = 16;
      maxInput.readOnly = false;
    }
  });

  // 초기 렌더링 시도도 반영
  if (typeSelect.value === "1") {
    maxInput.value = 4;
    maxInput.readOnly = true;
  }
});
</script>

</body>
</html>
